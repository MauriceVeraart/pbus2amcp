////////////////////////////////////////////////////////////////////////////////
// Copyright (c) 2017 Dimitry Ishenko
// Contact: dimitry (dot) ishenko (at) (gee) mail (dot) com
//
// Distributed under the GNU GPL license. See the LICENSE.md file for details.

////////////////////////////////////////////////////////////////////////////////
#include "casparcg.hpp"

////////////////////////////////////////////////////////////////////////////////
namespace src
{

////////////////////////////////////////////////////////////////////////////////
casparcg::casparcg(const QString& name, quint16 port, QObject* parent) :
    QObject(parent)
{
    connect(&socket_, &QTcpSocket::connected, this, &casparcg::connected);
    connect(&socket_, &QTcpSocket::disconnected, this, &casparcg::disconnected);
    connect(&socket_, static_cast<void(QTcpSocket::*)(QTcpSocket::SocketError)>(&QTcpSocket::error),
        [&](){ emit failed(socket_.errorString()); }
    );

    socket_.connectToHost(name, port);
}

////////////////////////////////////////////////////////////////////////////////
casparcg::~casparcg() { socket_.close(); }

////////////////////////////////////////////////////////////////////////////////
QList<media> casparcg::scan()
{
    return QList<media>();
}

////////////////////////////////////////////////////////////////////////////////
}
